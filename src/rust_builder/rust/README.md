# Origin Lens - Rust Integration

This directory contains the Rust library for C2PA manifest parsing using the official `c2pa-rs` SDK.

## Prerequisites

1. **Rust toolchain**: Install via [rustup](https://rustup.rs/)
   ```bash
   curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
   ```

2. **iOS targets** (for iOS builds):
   ```bash
   rustup target add aarch64-apple-ios x86_64-apple-ios aarch64-apple-ios-sim
   ```

3. **Android targets** (for Android builds):
   ```bash
   rustup target add aarch64-linux-android armv7-linux-androideabi x86_64-linux-android i686-linux-android
   ```

4. **flutter_rust_bridge_codegen**:
   ```bash
   cargo install flutter_rust_bridge_codegen
   ```

## Generate Bindings

After modifying Rust code, regenerate the Dart bindings:

```bash
cd /path/to/origin-lens-code
flutter_rust_bridge_codegen generate
```

## Build for iOS

```bash
cd /path/to/origin-lens-code
flutter build ios
```

## Project Structure

```
rust/
├── Cargo.toml           # Rust dependencies
├── src/
│   ├── lib.rs           # Library entry point
│   ├── api/
│   │   ├── mod.rs       # API module
│   │   └── c2pa_reader.rs  # C2PA parsing logic
│   └── frb_generated.rs # Auto-generated by flutter_rust_bridge
```

## API Functions

- `analyze_c2pa_from_path(file_path: String)` - Analyze a file for C2PA metadata
- `analyze_c2pa_from_bytes(data: Vec<u8>, mime_type: String)` - Analyze raw bytes
- `c2pa_sdk_version()` - Get the C2PA SDK version
- `is_c2pa_available()` - Check if the library is loaded

## C2PA Features

The library detects:
- ✅ C2PA manifests and Content Credentials
- ✅ Digital signature verification
- ✅ Certificate trust chain validation
- ✅ AI generation indicators (Midjourney, DALL-E, Stable Diffusion, etc.)
- ✅ Edit history and actions
- ✅ Signer information
